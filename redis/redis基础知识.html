<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2022年Redis最新面试题 - Redis基础知识 | 漫步coding</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="漫步coding的博客">
    
    <link rel="preload" href="/project/assets/css/0.styles.2a1e5e66.css" as="style"><link rel="preload" href="/project/assets/js/app.34004228.js" as="script"><link rel="preload" href="/project/assets/js/2.eeb24f79.js" as="script"><link rel="preload" href="/project/assets/js/53.4fa31046.js" as="script"><link rel="prefetch" href="/project/assets/js/10.c2b9e207.js"><link rel="prefetch" href="/project/assets/js/11.a59b52a4.js"><link rel="prefetch" href="/project/assets/js/12.f74f8d2f.js"><link rel="prefetch" href="/project/assets/js/13.1cdc54f3.js"><link rel="prefetch" href="/project/assets/js/14.54466736.js"><link rel="prefetch" href="/project/assets/js/15.03163b85.js"><link rel="prefetch" href="/project/assets/js/16.932067a4.js"><link rel="prefetch" href="/project/assets/js/17.ba11dbdc.js"><link rel="prefetch" href="/project/assets/js/18.45216f93.js"><link rel="prefetch" href="/project/assets/js/19.f5fa6b10.js"><link rel="prefetch" href="/project/assets/js/20.6633ae84.js"><link rel="prefetch" href="/project/assets/js/21.4eb648f8.js"><link rel="prefetch" href="/project/assets/js/22.cc2b6b3b.js"><link rel="prefetch" href="/project/assets/js/23.362f3e68.js"><link rel="prefetch" href="/project/assets/js/24.d072fdb4.js"><link rel="prefetch" href="/project/assets/js/25.0a77d255.js"><link rel="prefetch" href="/project/assets/js/26.6e1e0f2a.js"><link rel="prefetch" href="/project/assets/js/27.f9aca207.js"><link rel="prefetch" href="/project/assets/js/28.e92a4d37.js"><link rel="prefetch" href="/project/assets/js/29.4e1dcaab.js"><link rel="prefetch" href="/project/assets/js/3.dc393602.js"><link rel="prefetch" href="/project/assets/js/30.f9d56e6a.js"><link rel="prefetch" href="/project/assets/js/31.fa904c4a.js"><link rel="prefetch" href="/project/assets/js/32.30400fc3.js"><link rel="prefetch" href="/project/assets/js/33.a1ef6a50.js"><link rel="prefetch" href="/project/assets/js/34.8fb009a7.js"><link rel="prefetch" href="/project/assets/js/35.2a6fda65.js"><link rel="prefetch" href="/project/assets/js/36.294749cf.js"><link rel="prefetch" href="/project/assets/js/37.20683a66.js"><link rel="prefetch" href="/project/assets/js/38.ea5cb3f9.js"><link rel="prefetch" href="/project/assets/js/39.ccdeead5.js"><link rel="prefetch" href="/project/assets/js/4.f876ad59.js"><link rel="prefetch" href="/project/assets/js/40.48a6a4cf.js"><link rel="prefetch" href="/project/assets/js/41.8ef2ff9f.js"><link rel="prefetch" href="/project/assets/js/42.ddbb9271.js"><link rel="prefetch" href="/project/assets/js/43.5eef4375.js"><link rel="prefetch" href="/project/assets/js/44.4a1ccf61.js"><link rel="prefetch" href="/project/assets/js/45.cac19bc8.js"><link rel="prefetch" href="/project/assets/js/46.c5fcc280.js"><link rel="prefetch" href="/project/assets/js/47.5c69ad7c.js"><link rel="prefetch" href="/project/assets/js/48.2f6563d7.js"><link rel="prefetch" href="/project/assets/js/49.a5d08db0.js"><link rel="prefetch" href="/project/assets/js/5.18c5236f.js"><link rel="prefetch" href="/project/assets/js/50.a19adac6.js"><link rel="prefetch" href="/project/assets/js/51.7f17d99c.js"><link rel="prefetch" href="/project/assets/js/52.735ae462.js"><link rel="prefetch" href="/project/assets/js/54.d9a61a57.js"><link rel="prefetch" href="/project/assets/js/55.fdc8fcc9.js"><link rel="prefetch" href="/project/assets/js/56.1622f292.js"><link rel="prefetch" href="/project/assets/js/57.bb9be80d.js"><link rel="prefetch" href="/project/assets/js/58.e6e338fc.js"><link rel="prefetch" href="/project/assets/js/59.56a9e2c0.js"><link rel="prefetch" href="/project/assets/js/6.e86df8f9.js"><link rel="prefetch" href="/project/assets/js/60.68726952.js"><link rel="prefetch" href="/project/assets/js/61.926ef892.js"><link rel="prefetch" href="/project/assets/js/62.0d84d4c8.js"><link rel="prefetch" href="/project/assets/js/63.4a857a88.js"><link rel="prefetch" href="/project/assets/js/64.7348fd03.js"><link rel="prefetch" href="/project/assets/js/7.9ebead10.js"><link rel="prefetch" href="/project/assets/js/8.06f9a33b.js"><link rel="prefetch" href="/project/assets/js/9.882160f3.js">
    <link rel="stylesheet" href="/project/assets/css/0.styles.2a1e5e66.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/project/" class="home-link router-link-active"><!----> <span class="site-name">漫步coding</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/project/" aria-current="page" class="sidebar-link">首页</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2022年MySQL最新面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>2022年Redis最新面试题</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/redis/前言.html" class="sidebar-link">前言</a></li><li><a href="/project/redis/redis基础知识.html" class="active sidebar-link">Redis基础知识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/project/redis/redis数据结构.html" class="sidebar-link">Redis数据结构</a></li><li><a href="/project/redis/redis事务.html" class="sidebar-link">Redis事务</a></li><li><a href="/project/redis/redis数据持久化.html" class="sidebar-link">Redis数据持久化</a></li><li><a href="/project/redis/redis集群.html" class="sidebar-link">Redis集群</a></li><li><a href="/project/redis/redis淘汰策略.html" class="sidebar-link">Redis淘汰策略</a></li><li><a href="/project/redis/redis分布式锁.html" class="sidebar-link">Redis分布式锁</a></li><li><a href="/project/redis/redis缓存问题.html" class="sidebar-link">Redis缓存问题</a></li><li><a href="/project/redis/redis运维和部署.html" class="sidebar-link">Redis运维和部署</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode高频算法面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>IDEA系列教程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>公众号</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="redis基础知识"><a href="#redis基础知识" class="header-anchor">#</a> Redis基础知识</h3> <ul><li>什么是 Redis, 有哪些优缺点?</li> <li>Redis 最适合的场景, 可以简单的说说吗?</li> <li>Redis 相比 Memcached 有哪些优势？</li> <li>一个字符串类型的值能存储最大容量是多少？</li> <li>Redis 读写分离</li></ul> <h4 id="什么是-redis-有哪些优缺点"><a href="#什么是-redis-有哪些优缺点" class="header-anchor">#</a> 什么是 Redis, 有哪些优缺点?</h4> <p>出现概率: ★★★★</p> <p>Redis是一个非关系性数据库, 开源的、使用C语言编写、支持网络、可基于内存亦可持久化的日志型、key-value（键值对）数据库，是目前分布式架构中不可或缺的一环。</p> <p>Redis服务器程序是<font color="#FF000">单进程模型</font>，也就是在一台服务器上可以同时启动多个Redis进程，而Redis的实际处理速度则完全依靠于主进程的的执行效率。若在服务器上只运行一个Redis进程，当多个客户端同时访问时，服务器的处理能力会有一定程度的下降，若在同一台服务器上开启多个Redis进程，Redis在提高并发处理能力的同时会给服务器的CPU造成很大压力。也就是说，在实际生产环境中，需要根据实际的需求来决定开启多少个Redis进程。若对高并发要求更高一些，可能会考虑在同一台服务器上开启多个进程。若CPU资源比较紧张，采用单进程即可。</p> <p><font color="#FF000">Redis优点</font>：</p> <p>1)、性能极高, 读写性能优异，从内存当中进行IO读写速度快。</p> <p>2)、支持数据的持久化(支持<font color="#FF000">AOF</font>和<font color="#FF000">RDB</font>两种持久化方式)，对数据的更新采用<font color="#FF000">Copy-on-write</font>技术（写拷贝），可以异步的保存在磁盘上</p> <p>由于Redis的数据都存放在内存中，如果没有配置持久化，redis重启后数据就全丢失了，于是需要开启redis的持久化功能，将数据保存到磁 盘上，当redis重启后，可以从磁盘中恢复数据。</p> <p>redis提供两种方式进行持久化，一种是RDB持久化:指在指定的时间间隔内将内存中的数据集快照写入磁盘，实际操作过程是fork一个子进程，先将数据集写入临时文件，写入成功后，再替换之前的文件，用二进制压缩存储。</p> <p>还有一种是AOF持久化：以日志的形式记录服务器所处理的每一个写、删除操作，查询操作不会记录，以文本的方式记录，可以打开文件看到详细的操作记录。</p> <p>3)、支持主从复制，主机会自动将数据同步到从机，可以进行读写分离。</p> <p>4)、数据结构丰富：除了支持string类型的value外还支持string、hash、set、sortedset、list等数据结构。</p> <p>5)、原子性：多个操作通过MULTI和EXEC指令支持事务</p> <p><font color="#FF000">Redis缺点</font>：</p> <p>1)、主从同步，如果主机宕机，宕机前有一部分数据没有同步到从机，会导致数据不一致。</p> <p>2)、主从同步，数据同步会有延迟。</p> <p>3)、读写分离，主机写的负载量太大，也会导致主机的宕机</p> <p>4)、数据库容量受到物理内存的限制，不能用作海量数据的高性能读写</p> <h4 id="redis-最适合的场景-可以简单的说说吗"><a href="#redis-最适合的场景-可以简单的说说吗" class="header-anchor">#</a> Redis 最适合的场景, 可以简单的说说吗?</h4> <p>出现概率: ★★★★</p> <p>1、会话缓存（Session Cache）最常用的一种使用Redis的情景是会话缓存（session cache）, Redis缓存会话比其他存储（如Memcached）的优势在于：Redis提供持久化。</p> <p>2、排行榜/计数器</p> <p>Redis在内存中对数字进行递增或递减的操作实现的非常好。集合（Set）和有序集合（Sorted Set）也使得我们在执行这些操作的时候变的非常简单，Redis只是正好提供了这两种数据结构。</p> <p>3、发布/订阅</p> <p>Redis的发布/订阅功能。发布/订阅的使用场景确实非常多。我已看见人们在社交网络连接中使用，还可作为基于发布/订阅的脚本触发器，甚至用Redis的发布/订阅功能来建立聊天系统！</p> <p>4、缓存热数据</p> <p>可以缓存一些高频读, 低频写的内容， 比如app首页一些设置等。</p> <p>5、利用BitMap统计用户签到、统计活跃用户、用户在线状态等</p> <p>Redis从2.2.0版本开始新增了setbit,getbit,bitcount等几个bitmap相关命令。虽然是新命令，但是并没有新增新的数据类型，因为setbit等命令只不过是在set上的扩展。</p> <p>可以利用BitMap统计用户签到、统计活跃用户、用户在线状态</p> <p><img src="https://images.xiaozhuanlan.com/uploads/photo/2022/780caa3d-e2ac-4edb-815b-7390cc6883b1.png" alt=""></p> <p>6、限速，接口访问频率限制：比如发送短信验证码的接口，通常为了防止别人恶意频刷，会限制用户每分钟获取验证码的频率，例如一分钟不能超过 5 次。</p> <p>假设用于数据量上亿的场景下，例如几亿用户系统的签到，去重登录次数统计，某用户是否在线状态等等。腾讯10亿用户，要几个毫秒内查询到某个用户是否在线，能怎么做？</p> <p>千万别说给每个用户建立一个key，然后挨个记（你可以算一下需要的内存会很恐怖，而且这种类似的需求很多。这里要用到位操作——使用setbit、getbit、bitcount命令。原理是：</p> <p>redis内构建一个足够长的数组，每个数组元素只能是0和1两个值，然后这个数组的下标index用来表示用户id（必须是数字哈），那么很显然，这个几亿长的大数组就能通过下标和元素值（0和1）来构建一个记忆系统。</p> <p>Redis key name 约定</p> <div class="language- extra-class"><pre class="language-text"><code>$dayKey = 'login:'.\date('Ymd',\time());
</code></pre></div><p>Redis 数据结构</p> <table><thead><tr><th>key</th> <th>sign:20220405</th> <th>sign:20220405</th> <th>sign:20220405 ...</th></tr></thead> <tbody><tr><td>offset (UserId)</td> <td>1000</td> <td>1001</td> <td>1002</td></tr> <tr><td>value</td> <td>0</td> <td>1</td> <td>1</td></tr> <tr><td>status</td> <td>未签到</td> <td>已签到</td> <td>已签到</td></tr></tbody></table> <p>使用经验</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; setbit 'login-20220405' 2 1
127.0.0.1:6379&gt; setbit 'login-20220405' 100 1
(integer) 1
127.0.0.1:6379&gt; setbit 'login-20220405' 200000000 1
(integer) 1
127.0.0.1:6379&gt; setbit 'login-20220405' 4290000000 1
(integer) 1
127.0.0.1:6379&gt; setbit 'login-20220405' 4300000000 1
(error) ERR bit offset is not an integer or out of range
127.0.0.1:6379&gt; getbit 'login-20220405' 100
(integer) 1
127.0.0.1:6379&gt; getbit 'login-20220405' 101
(integer) 0
127.0.0.1:6379&gt;
</code></pre></div><p>这里需要注意的是Redis中字符串限制最大为512MB，所以位图中最大可以设置2^32个不同的位（42.9亿个）。图位的最小单位是比特(bit)，每个bit的值只能是0或1。 同时注意setbit时的偏移量，当偏移量很大时，可能会有较大耗时。 位图不是绝对的好，有时可能更浪费空间。</p> <h4 id="redis-相比-memcached-有哪些优势"><a href="#redis-相比-memcached-有哪些优势" class="header-anchor">#</a> Redis 相比 Memcached 有哪些优势？</h4> <p>出现概率: ★★★</p> <p>如果简单地比较Redis与Memcached的区别，大多数都会得到以下观点：</p> <p>1 、数据支持类型 Memcache 对数据类型支持相对简单。Redis 有复杂的数据类型。Redis不仅仅支持简单的k/v类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</p> <p>2 、Redis支持数据的备份，即master-slave模式的数据备份。</p> <p>3 、存储方式 Memecache 把数据全部存在内存之中， 断电后会挂掉， 数据不能超过内存大小。Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。</p> <h4 id="一个字符串类型的值能存储最大容量是多少"><a href="#一个字符串类型的值能存储最大容量是多少" class="header-anchor">#</a> 一个字符串类型的值能存储最大容量是多少？</h4> <p>Redis中<font color="#FF000">字符串限制最大为512MB</font></p> <h4 id="redis-读写分离"><a href="#redis-读写分离" class="header-anchor">#</a> Redis 读写分离</h4> <p>出现概率: ★★★</p> <p>读取请求QPS（Queries Per Second）压力较大的服务, 可以采用Redis读写分离，可以提供高可用、高性能、灵活的读写分离服务，满足热点数据集中及高并发读取的业务需求，最大化地节约运维成本。</p> <p>读写分离版采取<font color="#FF000">链式复制架构</font>，可以通过扩展只读实例个数使整体实例性能呈线性增长，同时基于源码层面对Redis复制流程的定制优化，可以最大程度地提升线性复制的系统稳定性，充分利用每一个只读节点的物理资源。</p> <p><img src="https://images.xiaozhuanlan.com/uploads/photo/2022/45df7655-e3d7-4cea-a129-3758e487c431.png" alt=""></p> <p>由于数据同步至只读节点存在一定延迟，且采用链式复制，只读节点数越多，靠近链路末端的只读节点数据延迟越大，因此选用此架构时，业务需要能接受一定程度的脏数据。如果对数据一致性要求较高，推荐选用集群架构。</p> <h4 id="你知道怎么用redis实现实现分布式锁"><a href="#你知道怎么用redis实现实现分布式锁" class="header-anchor">#</a> 你知道怎么用Redis实现实现分布式锁?</h4> <p>出现概率: ★★★★</p> <p>Redis 官方站提出了一种权威的基于 Redis 实现分布式锁的方式名叫<font color="#FF000">Redlock</font>，此种方式比原先的单节点的方法更安全。它可以保证以下特性：</p> <p>安全特性：互斥访问，即<font color="#FF000">永远只有一个client能拿到锁</font></p> <p>避免死锁：最终 client 都可能拿到锁，不会出现死锁的情况，即使原本锁住某资源的 client crash 了或者出现了网络分区</p> <p>容错性：只要大部分 Redis 节点存活就可以正常提供服务</p> <p>也欢迎关注我的公众号: <code>漫步coding</code>。 一起交流, 在coding的世界里漫步, 回复: <font color="#FF000"><code>redis</code></font>, 免费获取最新Redis面试题(含答案)。</p> <p><img src="https://images.xiaozhuanlan.com/uploads/photo/2022/5cb0c91e-fd83-4a04-8df6-65fb602b3834.png" alt=""></p> <p>希望这篇文章可以帮助大家, 也希望大家都能找到的好工作。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/project/redis/前言.html" class="prev">
        前言
      </a></span> <span class="next"><a href="/project/redis/redis数据结构.html">
        Redis数据结构
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/project/assets/js/app.34004228.js" defer></script><script src="/project/assets/js/2.eeb24f79.js" defer></script><script src="/project/assets/js/53.4fa31046.js" defer></script>
  </body>
</html>
